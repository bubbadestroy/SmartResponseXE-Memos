<article class="markdown-body entry-content container-lg" itemprop="text"><h1><a id="user-content-smartresponsexe-memos" class="anchor" aria-hidden="true" href="#smartresponsexe-memos"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>SmartResponseXE-Memos </h1>
<h1><a id="user-content-оглавление" class="anchor" aria-hidden="true" href="#оглавление"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Table of contents </h1>
<ul>
  <li><a href="#about">SmartResponseXE Brief </a>
  </li><li><a href="#links">Links / Documentation </a>
  </li><li><a href="#remake-terminal">Remake SmartResponseXE Arduino-SmartResponseXE </a>
  </li><li><a href="#connecting-spi">ISP connection (firmware download) </a>
  </li><li><a href="#no-access-linux-avr-dude">Lack of rights when trying to flash a board in Linux using avrdude </a>
  </li><li><a href="#features-terminal-smart-response-xe">Technical implementation considerations for SMART Response XE (keyboard + uart) </a>
</li></ul>
<h2><a id="user-content-краткое-описание-smartresponsexe" class="anchor" aria-hidden="true" href="#краткое-описание-smartresponsexe"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a name="user-content-about">SmartResponseXE Brief </a></h2>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/gc986/SmartResponseXE-Memos/blob/main/images/SResponse.png"><img src="https://github.com/gc986/SmartResponseXE-Memos/raw/main/images/SResponse.png" style="max-width:100%;"></a></p>
<p>Why is this device interesting? Those that are built on the basis of the ATmega128RFA1 microcontroller, it has a built-in keyboard and a wonderful monochrome display. And what is interesting about the microcontroller ( <i>ATmega128RFA1 </i>)? It has a built-in ZigBee transmitter. And besides, these pieces of iron ( <i>SmartResponseXE </i>) are in the assortment on Ebay, tk. at one time they were bought in large quantities at schools, and now they are selling for $ 10 for a couple of pieces. </p>
<p><a name="user-content-links"></a></p><h2><a id="user-content-ссылкидокументация" class="anchor" aria-hidden="true" href="#ссылкидокументация"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a name="user-content-links">Links / Documentation </a></h2>
Circuits obtained by reverse engineering and keen eyes - <a href="https://github.com/fdufnews/SMART-Response-XE-schematics">https://github.com/fdufnews/SMART-Response-XE-schematics </a><p></p>
<p><b>Original datasheet for ATmega128RFA1 chip (5mb!) - <a href="https://github.com/gc986/SmartResponseXE-Memos/blob/main/docs/ATmega128RFA1_Datasheeta.pdf">https://github.com/gc986/SmartResponseXE-Memos/blob/main/docs/ATmega128RFA1_Datasheeta.pdf </a></b></p>
<p><b>SparkFun </b></p>
<ul>
  <li>The loader is taken from the SparkFun project "ATmega128RFA1 Dev Board" - <a href="https://cdn.sparkfun.com/assets/learn_tutorials/9/2/ATmega128RFA1_Addon.zip" rel="nofollow">https://cdn.sparkfun.com/assets/learn_tutorials/9/2/ATmega128RFA1_Addon.zip </a>
   (copy in the current repository "archives / bootloader-ATmega128RFA1_Addon.zip") </li>
  <li>Arduino settings page - <a href="https://learn.sparkfun.com/tutorials/atmega128rfa1-dev-board-hookup-guide#example-code" rel="nofollow">https://learn.sparkfun.com/tutorials/atmega128rfa1-dev-board-hookup-guide#example-code </a>
   (copy in current repository "docs / sparkfun_com_tutorials_atmega128rfa1_dev_board.pdf") </li>
  <li>Original project repository - <a href="https://github.com/sparkfun/ATmega128RFA1_Dev">https://github.com/sparkfun/ATmega128RFA1_Dev </a></li>
</ul>
<p>Repository for Arduino, Keyboard and Screen Controls for SmartResponseXE - <a href="https://github.com/bitbank2/SmartResponseXE">https://github.com/bitbank2/SmartResponseXE </a>
 (copy in the current repository "archive / SmartResponseXE-master.zip") </p>
<p>My fork of the keyboard and screen control repository for SmartResponseXE - added functions for pixel-by-pixel drawing of squares and lines - <a href="https://github.com/gc986/SmartResponseXE">https://github.com/gc986/SmartResponseXE </a></p>
<p><a name="user-content-remake-terminal"></a></p><h2><a id="user-content-переделка-smartresponsexe-в-arduino-smartresponsexe" class="anchor" aria-hidden="true" href="#переделка-smartresponsexe-в-arduino-smartresponsexe"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a name="user-content-remake-terminal">Переделка SmartResponseXE в Arduino-SmartResponseXE </a></h2>To convert the SmartResponseXE data collection terminal into Arduino, you need to slightly modify the device itself (bring out the ports for programming the board), and fill in the bootloader.  After that, the device will behave like a regular pumped Arduino, with a display, keyboard and wireless interface. <p></p>
<p>Below is the sequence of parsing the device.  The device is assembled extremely well, all the grooves are in place, just such an anti-vandal device for use in schools.  Nevertheless, be careful when parsing, and do not forget about the screw under the battery pack: </p>
<p>1 <br>
<a target="_blank" rel="noopener noreferrer" href="https://github.com/gc986/SmartResponseXE-Memos/blob/main/images/disassembling-1.jpg"><img src="https://github.com/gc986/SmartResponseXE-Memos/raw/main/images/disassembling-1.jpg" style="max-width:100%;"></a></p>
<p>2 <br>
<a target="_blank" rel="noopener noreferrer" href="https://github.com/gc986/SmartResponseXE-Memos/blob/main/images/disassembling-2.jpg"><img src="https://github.com/gc986/SmartResponseXE-Memos/raw/main/images/disassembling-2.jpg" style="max-width:100%;"></a></p>
<p>3 <br>
<a target="_blank" rel="noopener noreferrer" href="https://github.com/gc986/SmartResponseXE-Memos/blob/main/images/disassembling-3.jpg"><img src="https://github.com/gc986/SmartResponseXE-Memos/raw/main/images/disassembling-3.jpg" style="max-width:100%;"></a></p>
<p>4 <br>
<a target="_blank" rel="noopener noreferrer" href="https://github.com/gc986/SmartResponseXE-Memos/blob/main/images/disassembling-4.jpg"><img src="https://github.com/gc986/SmartResponseXE-Memos/raw/main/images/disassembling-4.jpg" style="max-width:100%;"></a></p>
<p>5 <br>
<a target="_blank" rel="noopener noreferrer" href="https://github.com/gc986/SmartResponseXE-Memos/blob/main/images/disassembling-5.jpg"><img src="https://github.com/gc986/SmartResponseXE-Memos/raw/main/images/disassembling-5.jpg" style="max-width:100%;"></a></p>
<p>6 <br>
<a target="_blank" rel="noopener noreferrer" href="https://github.com/gc986/SmartResponseXE-Memos/blob/main/images/disassembling-6.jpg"><img src="https://github.com/gc986/SmartResponseXE-Memos/raw/main/images/disassembling-6.jpg" style="max-width:100%;"></a></p>
<p>7 <br>
<a target="_blank" rel="noopener noreferrer" href="https://github.com/gc986/SmartResponseXE-Memos/blob/main/images/disassembling-7.jpg"><img src="https://github.com/gc986/SmartResponseXE-Memos/raw/main/images/disassembling-7.jpg" style="max-width:100%;"></a></p>
<p>8 <br>
<a target="_blank" rel="noopener noreferrer" href="https://github.com/gc986/SmartResponseXE-Memos/blob/main/images/disassembling-8.jpg"><img src="https://github.com/gc986/SmartResponseXE-Memos/raw/main/images/disassembling-8.jpg" style="max-width:100%;"></a></p>
<p>9 <br>
<a target="_blank" rel="noopener noreferrer" href="https://github.com/gc986/SmartResponseXE-Memos/blob/main/images/disassembling-9.jpg"><img src="https://github.com/gc986/SmartResponseXE-Memos/raw/main/images/disassembling-9.jpg" style="max-width:100%;"></a></p>
<p>10 <br>
<a target="_blank" rel="noopener noreferrer" href="https://github.com/gc986/SmartResponseXE-Memos/blob/main/images/disassembling-10.jpg"><img src="https://github.com/gc986/SmartResponseXE-Memos/raw/main/images/disassembling-10.jpg" style="max-width:100%;"></a></p>
<p><a name="user-content-connecting-spi"></a></p><h2><a id="user-content-подключение-к-isp-загрузка-прошивки" class="anchor" aria-hidden="true" href="#подключение-к-isp-загрузка-прошивки"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a name="user-content-connecting-spi">ISP connection (firmware download) </a></h2>To download the firmware to the terminal microcontroller, I use the standard ISP interface.  A special connection platform has been made for it.  For the convenience of working with the interface, I suggest soldering the wires for further connection to the programmer.
 <br>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/gc986/SmartResponseXE-Memos/blob/main/images/ISP-0.jpg"><img src="https://github.com/gc986/SmartResponseXE-Memos/raw/main/images/ISP-0.jpg" style="max-width:100%;"></a></p><p></p>
<br>To connect and use standard wires for prototyping, after cutting off the edge part.  It is very convenient that there are technological holes in the terminal case.  It is convenient to stretch the wires in them and twist them into a knot so that in the future they do not have a chance to be pulled out.
 <br>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/gc986/SmartResponseXE-Memos/blob/main/images/ISP-1.jpg"><img src="https://github.com/gc986/SmartResponseXE-Memos/raw/main/images/ISP-1.jpg" style="max-width:100%;"></a></p>
<br>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/gc986/SmartResponseXE-Memos/blob/main/images/ISP-2.jpg"><img src="https://github.com/gc986/SmartResponseXE-Memos/raw/main/images/ISP-2.jpg" style="max-width:100%;"></a></p>
<p>After you solder the wires, you might get the following result:
 <br>
<a target="_blank" rel="noopener noreferrer" href="https://github.com/gc986/SmartResponseXE-Memos/blob/main/images/ISP-3.jpg"><img src="https://github.com/gc986/SmartResponseXE-Memos/raw/main/images/ISP-3.jpg" style="max-width:100%;"></a></p>
<p><a name="user-content-no-access-linux-avr-dude"></a></p><h2><a id="user-content-нехватка-прав-при-попытке-прошить-плату-в-linux-с-помощью-avrdude" class="anchor" aria-hidden="true" href="#нехватка-прав-при-попытке-прошить-плату-в-linux-с-помощью-avrdude"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a name="user-content-no-access-linux-avr-dude">Lack of rights when trying to flash a board in Linux using avrdude </a></h2><p></p>
<p>If, when trying to flash SmartResponseXE in Linux using avrdude, you encounter an insufficient privilege error: </p>
<p><i><b>avrdude: usbdev_open(): cannot open device: Permission denied </b></i></p>
<p>Then these commands will help you: </p>
<p><i><b>echo "SUBSYSTEM==\"usb\", MODE=\"0660\", GROUP=\"$(id -gn)\"" | sudo tee /etc/udev/rules.d/00-usb-permissions.rules
 <br>
sudo udevadm control --reload-rules </b></i></p>
<p>!  Reconnect the programmer / device and only then the new rules will take effect! </p>
<p>These commands make your Linux user an unrestricted user of USB devices. From a security point of view, this is bad, since any code running on your behalf will have unrestricted access to USB devices, but on the other hand, nothing better could be done, since the avrdude developers work with USB device data directly, bypassing the standard protocol for working with USB. (original <a href="https://github.com/snapcrafters/arduino/issues/10">https://github.com/snapcrafters/arduino/issues/10 </a>) </p>
<p><a name="user-content-features-terminal-smart-response-xe"></a></p><h2><a id="user-content-особенности-технической-реализации-smart-response-xe-клавиатураuart" class="anchor" aria-hidden="true" href="#особенности-технической-реализации-smart-response-xe-клавиатураuart"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a name="user-content-features-terminal-smart-response-xe">Technical implementation considerations for SMART Response XE (keyboard + uart) </a></h2>
The foot of the fifth column of the keyboard (keys 5, T, G, V) are connected to the port that implements the UART connection interface, so the simultaneous use of the UART and the keyboard is impossible in normal mode (pressing the keys of the fifth column will trigger the tenth row of the keyboard, for example, when pressing on the T key, the system will detect that the P key is pressed) <p></p>
</article>
